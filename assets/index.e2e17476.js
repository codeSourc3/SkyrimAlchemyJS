var mt=Object.defineProperty;var vt=(s,e,t)=>e in s?mt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var K=(s,e,t)=>(vt(s,typeof e!="symbol"?e+"":e,t),t),me=(s,e,t)=>{if(!e.has(s))throw TypeError("Cannot "+t)};var a=(s,e,t)=>(me(s,e,"read from private field"),t?t.call(s):e.get(s)),f=(s,e,t)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,t)},_=(s,e,t,i)=>(me(s,e,"write to private field"),i?i.call(s,t):e.set(s,t),t);var b=(s,e,t)=>(me(s,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();function R(s,{content:e="",classes:t=[],id:i="",parent:n,children:r=[]}={}){const o=document.createElement(s);return e.length>0&&(o.textContent=e),i.length>0&&(o.id=i),n instanceof HTMLElement&&n.appendChild(o),t.length>0&&o.classList.add(...t),r.length>0&&o.append(...r),o}var B;class $t{constructor(){f(this,B,new Map)}id(e){if(a(this,B).has(e))return a(this,B).get(e);{const t=document.getElementById(e);return a(this,B).set(e,t),t}}}B=new WeakMap;const yt=3,Et=2;function x(s,e,t=null,i={bubbles:!1,cancelable:!1,composed:!1}){let n;return t!==null?n=new CustomEvent(s,{...i,detail:t}):n=new Event(s,i),e.dispatchEvent(n)}const Ye="worker-ready",Qe="populate-ingredient-list",et="ingredient-search-result",tt="calculate-potion-result",st="worker-error",_t=s=>x(Ye,s,null,{bubbles:!0}),bt=(s,e)=>x(Qe,s,{payload:e},{bubbles:!0}),At=(s,e)=>x(et,s,{payload:e},{bubbles:!0,cancelable:!0}),St=(s,e)=>x(tt,s,{payload:e},{bubbles:!0,cancelable:!0}),Ct=(s,e)=>x(st,s,{payload:e},{bubbles:!0,cancelable:!0}),it="ingredient-selected",nt="ingredient-deselected",rt="max-ingredients-selected",wt=(s,e)=>x(it,s,{ingredientName:e},{bubbles:!0,cancelable:!0}),ot=(s,e)=>x(nt,s,{ingredientName:e},{bubbles:!0,cancelable:!0}),It=s=>x(rt,s,null,{bubbles:!0});function Re(s,e={}){return{type:s,payload:e}}function Rt(s,e,t){return Re("search",{effectSearchTerm:s,effectOrder:e,dlc:t})}function Lt(){return Re("populate")}function kt(s,e=15,t=0,i=!1,n=!1,r=!1,o=0){return Re("calculate",{names:s,skill:e,alchemist:t,hasBenefactor:n,hasPhysician:i,hasPoisoner:r,fortifyAlchemy:o})}const M={target:null,["worker-ready"](){_t(this.target)},["search-result"](s){At(this.target,s)},["populate-result"](s){console.assert(Array.isArray(s),"Message handler switch docs need updating."),bt(this.target,s)},["calculate-result"](s){console.dir(s),St(this.target,s)},["worker-error"](s){Ct(this.target,s)},default(s){this.onUnknownMessage(s)},onUnknownMessage:null};var V,m;class Tt{constructor(){f(this,V,void 0);f(this,m,void 0);_(this,V,new Worker(new URL("/SkyrimAlchemyJS/assets/alchemy-worker-script.4cc2e223.js",self.location),{type:"module",name:"mixer"}));const e=new MessageChannel;_(this,m,e.port1),this.onUnknownMessage=i=>console.debug(`${i} is not a valid message type.`),M.target=a(this,m),M["calculate-result"].bind(a(this,m)),M["populate-result"].bind(a(this,m)),M.onUnknownMessage=this.onUnknownMessage;const t=i=>{console.log(`Message ${i.type}`);const{type:n,payload:r}=i.data;let o=String(n);o in M?M[o](r):M.default(n)};a(this,m).addEventListener("message",t),a(this,m).start(),a(this,V).postMessage({type:"init"},[e.port2])}onWorkerReady(e){typeof e=="function"&&a(this,m).addEventListener(Ye,e)}onIngredientSearchResult(e){typeof e=="function"&&a(this,m).addEventListener(et,e)}onPopulateIngredientList(e){typeof e=="function"&&a(this,m).addEventListener(Qe,e)}onCalculateResult(e){typeof e=="function"&&a(this,m).addEventListener(tt,e)}onWorkerError(e){typeof e=="function"&&a(this,m).addEventListener(st,e)}postMessage(e){a(this,m).postMessage(e)}sendSearchMessage(e,t,i){const n=Rt(e,t,i);a(this,m).postMessage(n)}sendPopulateMessage(){const e=Lt();a(this,m).postMessage(e)}sendCalculateMessage(e,t=15,i=0,n=!1,r=!1,o=!1,d=0){const l=kt(e,t,i,n,r,o,d);a(this,m).postMessage(l)}terminate(){a(this,V).terminate()}static get WORKER_READY(){return"worker-ready"}static get POPULATE_INGREDIENT_LIST(){return"populate-ingredient-list"}static get INGREDIENT_SEARCH_RESULT(){return"ingredient-search-result"}static get CALCULATE_POTION_RESULT(){return"calculate-potion-result"}static get WORKER_ERROR(){return"worker-error"}}V=new WeakMap,m=new WeakMap;var S;const xe=class{constructor(e=new Set){f(this,S,void 0);_(this,S,e)}static get MAX_INGREDIENTS(){return yt}get selectedIngredients(){return a(this,S)}selectIngredient(e){a(this,S).add(e)}unselectIngredient(e){return a(this,S).delete(e)}hasIngredient(e){return a(this,S).has(e)}clear(){a(this,S).clear()}canSelectMore(){return a(this,S).size<xe.MAX_INGREDIENTS}};let le=xe;S=new WeakMap;function Nt(s,e){s.isConnected&&s.setAttribute("form",e)}function xt(s){const e=document.createElement("li"),t=document.createElement("button");t.type="button",t.value=s,t.textContent=s;const i=document.createElement("input");return i.type="hidden",i.name="selected-ingredients",i.id=s.replace(" ","-").toLowerCase(),i.value=s,e.appendChild(t),e.appendChild(i),e}var A,C;class Mt{constructor(e,t=new Set){f(this,A,void 0);f(this,C,void 0);_(this,A,e),_(this,C,t),a(this,A).addEventListener("click",this)}hasIngredient(e){return a(this,C).has(e)}addIngredient(e){if(typeof e!="string")throw new TypeError(`ingredientName must be a string, not ${typeof e}`);a(this,C).has(e)&&e.length===0||(a(this,C).add(e),this.addToList(e))}removeIngredient(e){a(this,C).delete(e)&&this.removeFromList(e)}addToList(e){const t=xt(e);a(this,A).appendChild(t),Nt(t.lastElementChild,"brew-potion")}removeFromList(e){const t=a(this,A).children.length;for(let i=0;i<t;i++){const n=a(this,A).children[i];if(n.textContent===e){a(this,A).removeChild(n);break}}}addAll(e){for(let t of e)this.addIngredient(t)}clear(){a(this,A).replaceChildren(),a(this,C).clear()}handleEvent(e){const t=e.target,{value:i}=t;this.hasIngredient(i)&&(this.removeIngredient(i),ot(a(this,A),i))}}A=new WeakMap,C=new WeakMap;const Pt="modulepreload",Ot=function(s){return"/SkyrimAlchemyJS/"+s},Me={},Ut=function(e,t,i){if(!t||t.length===0)return e();const n=document.getElementsByTagName("link");return Promise.all(t.map(r=>{if(r=Ot(r),r in Me)return;Me[r]=!0;const o=r.endsWith(".css"),d=o?'[rel="stylesheet"]':"";if(!!i)for(let p=n.length-1;p>=0;p--){const h=n[p];if(h.href===r&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${d}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":Pt,o||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),o)return new Promise((p,h)=>{c.addEventListener("load",p),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e())};function Dt(s={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:i,onRegistered:n,onRegisteredSW:r,onRegisterError:o}=s;let d,l,c,p;const h=async(v=!0)=>{await c,v&&(d==null||d.addEventListener("controlling",I=>{I.isUpdate&&window.location.reload()})),await(p==null?void 0:p())};async function u(){if("serviceWorker"in navigator){const{Workbox:v,messageSW:I}=await Ut(()=>import("./workbox-window.prod.es5.d2780aeb.js"),[]);p=async()=>{l&&l.waiting&&await I(l.waiting,{type:"SKIP_WAITING"})},d=new v("/SkyrimAlchemyJS/sw.js",{scope:"/SkyrimAlchemyJS/",type:"classic"}),d.addEventListener("activated",$=>{$.isUpdate||i==null||i()});{const $=()=>{t==null||t()};d.addEventListener("waiting",$),d.addEventListener("externalwaiting",$)}d.register({immediate:e}).then($=>{l=$,r?r("/SkyrimAlchemyJS/sw.js",$):n==null||n($)}).catch($=>{o==null||o($)})}}return c=u(),h}const Ht=new Intl.ListFormat(navigator.language);function Wt(s){return Ht.format(s)}function be(s){return typeof s>"u"||s===null}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const oe=window,Le=oe.ShadowRoot&&(oe.ShadyCSS===void 0||oe.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,ke=Symbol(),Pe=new WeakMap;class lt{constructor(e,t,i){if(this._$cssResult$=!0,i!==ke)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(Le&&e===void 0){const i=t!==void 0&&t.length===1;i&&(e=Pe.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&Pe.set(t,e))}return e}toString(){return this.cssText}}const Bt=s=>new lt(typeof s=="string"?s:s+"",void 0,ke),Vt=(s,...e)=>{const t=s.length===1?s[0]:e.reduce((i,n,r)=>i+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+s[r+1],s[0]);return new lt(t,s,ke)},jt=(s,e)=>{Le?s.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet):e.forEach(t=>{const i=document.createElement("style"),n=oe.litNonce;n!==void 0&&i.setAttribute("nonce",n),i.textContent=t.cssText,s.appendChild(i)})},Oe=Le?s=>s:s=>s instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return Bt(t)})(s):s;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var ve;const ae=window,Ue=ae.trustedTypes,Ft=Ue?Ue.emptyScript:"",De=ae.reactiveElementPolyfillSupport,Ae={toAttribute(s,e){switch(e){case Boolean:s=s?Ft:null;break;case Object:case Array:s=s==null?s:JSON.stringify(s)}return s},fromAttribute(s,e){let t=s;switch(e){case Boolean:t=s!==null;break;case Number:t=s===null?null:Number(s);break;case Object:case Array:try{t=JSON.parse(s)}catch{t=null}}return t}},at=(s,e)=>e!==s&&(e==e||s==s),$e={attribute:!0,type:String,converter:Ae,reflect:!1,hasChanged:at};class D extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var t;this.finalize(),((t=this.h)!==null&&t!==void 0?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((t,i)=>{const n=this._$Ep(i,t);n!==void 0&&(this._$Ev.set(n,i),e.push(n))}),e}static createProperty(e,t=$e){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const i=typeof e=="symbol"?Symbol():"__"+e,n=this.getPropertyDescriptor(e,i,t);n!==void 0&&Object.defineProperty(this.prototype,e,n)}}static getPropertyDescriptor(e,t,i){return{get(){return this[t]},set(n){const r=this[e];this[t]=n,this.requestUpdate(e,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||$e}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,i=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const n of i)this.createProperty(n,t[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const n of i)t.unshift(Oe(n))}else e!==void 0&&t.push(Oe(e));return t}static _$Ep(e,t){const i=t.attribute;return i===!1?void 0:typeof i=="string"?i:typeof e=="string"?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(t=>t(this))}addController(e){var t,i;((t=this._$ES)!==null&&t!==void 0?t:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((i=e.hostConnected)===null||i===void 0||i.call(e))}removeController(e){var t;(t=this._$ES)===null||t===void 0||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])})}createRenderRoot(){var e;const t=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return jt(t,this.constructor.elementStyles),t}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(t=>{var i;return(i=t.hostConnected)===null||i===void 0?void 0:i.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(t=>{var i;return(i=t.hostDisconnected)===null||i===void 0?void 0:i.call(t)})}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$EO(e,t,i=$e){var n;const r=this.constructor._$Ep(e,i);if(r!==void 0&&i.reflect===!0){const o=(((n=i.converter)===null||n===void 0?void 0:n.toAttribute)!==void 0?i.converter:Ae).toAttribute(t,i.type);this._$El=e,o==null?this.removeAttribute(r):this.setAttribute(r,o),this._$El=null}}_$AK(e,t){var i;const n=this.constructor,r=n._$Ev.get(e);if(r!==void 0&&this._$El!==r){const o=n.getPropertyOptions(r),d=typeof o.converter=="function"?{fromAttribute:o.converter}:((i=o.converter)===null||i===void 0?void 0:i.fromAttribute)!==void 0?o.converter:Ae;this._$El=r,this[r]=d.fromAttribute(t,o.type),this._$El=null}}requestUpdate(e,t,i){let n=!0;e!==void 0&&(((i=i||this.constructor.getPropertyOptions(e)).hasChanged||at)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),i.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,i))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((n,r)=>this[r]=n),this._$Ei=void 0);let t=!1;const i=this._$AL;try{t=this.shouldUpdate(i),t?(this.willUpdate(i),(e=this._$ES)===null||e===void 0||e.forEach(n=>{var r;return(r=n.hostUpdate)===null||r===void 0?void 0:r.call(n)}),this.update(i)):this._$Ek()}catch(n){throw t=!1,this._$Ek(),n}t&&this._$AE(i)}willUpdate(e){}_$AE(e){var t;(t=this._$ES)===null||t===void 0||t.forEach(i=>{var n;return(n=i.hostUpdated)===null||n===void 0?void 0:n.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((t,i)=>this._$EO(i,this[i],t)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}D.finalized=!0,D.elementProperties=new Map,D.elementStyles=[],D.shadowRootOptions={mode:"open"},De==null||De({ReactiveElement:D}),((ve=ae.reactiveElementVersions)!==null&&ve!==void 0?ve:ae.reactiveElementVersions=[]).push("1.5.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var ye;const ce=window,j=ce.trustedTypes,He=j?j.createPolicy("lit-html",{createHTML:s=>s}):void 0,L=`lit$${(Math.random()+"").slice(9)}$`,ct="?"+L,zt=`<${ct}>`,F=document,Y=(s="")=>F.createComment(s),Q=s=>s===null||typeof s!="object"&&typeof s!="function",dt=Array.isArray,Gt=s=>dt(s)||typeof(s==null?void 0:s[Symbol.iterator])=="function",J=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,We=/-->/g,Be=/>/g,P=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Ve=/'/g,je=/"/g,ht=/^(?:script|style|textarea|title)$/i,qt=s=>(e,...t)=>({_$litType$:s,strings:e,values:t}),Fe=qt(1),z=Symbol.for("lit-noChange"),g=Symbol.for("lit-nothing"),ze=new WeakMap,W=F.createTreeWalker(F,129,null,!1),Kt=(s,e)=>{const t=s.length-1,i=[];let n,r=e===2?"<svg>":"",o=J;for(let l=0;l<t;l++){const c=s[l];let p,h,u=-1,v=0;for(;v<c.length&&(o.lastIndex=v,h=o.exec(c),h!==null);)v=o.lastIndex,o===J?h[1]==="!--"?o=We:h[1]!==void 0?o=Be:h[2]!==void 0?(ht.test(h[2])&&(n=RegExp("</"+h[2],"g")),o=P):h[3]!==void 0&&(o=P):o===P?h[0]===">"?(o=n!=null?n:J,u=-1):h[1]===void 0?u=-2:(u=o.lastIndex-h[2].length,p=h[1],o=h[3]===void 0?P:h[3]==='"'?je:Ve):o===je||o===Ve?o=P:o===We||o===Be?o=J:(o=P,n=void 0);const I=o===P&&s[l+1].startsWith("/>")?" ":"";r+=o===J?c+zt:u>=0?(i.push(p),c.slice(0,u)+"$lit$"+c.slice(u)+L+I):c+L+(u===-2?(i.push(void 0),l):I)}const d=r+(s[t]||"<?>")+(e===2?"</svg>":"");if(!Array.isArray(s)||!s.hasOwnProperty("raw"))throw Error("invalid template strings array");return[He!==void 0?He.createHTML(d):d,i]};class ee{constructor({strings:e,_$litType$:t},i){let n;this.parts=[];let r=0,o=0;const d=e.length-1,l=this.parts,[c,p]=Kt(e,t);if(this.el=ee.createElement(c,i),W.currentNode=this.el.content,t===2){const h=this.el.content,u=h.firstChild;u.remove(),h.append(...u.childNodes)}for(;(n=W.nextNode())!==null&&l.length<d;){if(n.nodeType===1){if(n.hasAttributes()){const h=[];for(const u of n.getAttributeNames())if(u.endsWith("$lit$")||u.startsWith(L)){const v=p[o++];if(h.push(u),v!==void 0){const I=n.getAttribute(v.toLowerCase()+"$lit$").split(L),$=/([.?@])?(.*)/.exec(v);l.push({type:1,index:r,name:$[2],strings:I,ctor:$[1]==="."?Xt:$[1]==="?"?Yt:$[1]==="@"?Qt:ge})}else l.push({type:6,index:r})}for(const u of h)n.removeAttribute(u)}if(ht.test(n.tagName)){const h=n.textContent.split(L),u=h.length-1;if(u>0){n.textContent=j?j.emptyScript:"";for(let v=0;v<u;v++)n.append(h[v],Y()),W.nextNode(),l.push({type:2,index:++r});n.append(h[u],Y())}}}else if(n.nodeType===8)if(n.data===ct)l.push({type:2,index:r});else{let h=-1;for(;(h=n.data.indexOf(L,h+1))!==-1;)l.push({type:7,index:r}),h+=L.length-1}r++}}static createElement(e,t){const i=F.createElement("template");return i.innerHTML=e,i}}function G(s,e,t=s,i){var n,r,o,d;if(e===z)return e;let l=i!==void 0?(n=t._$Co)===null||n===void 0?void 0:n[i]:t._$Cl;const c=Q(e)?void 0:e._$litDirective$;return(l==null?void 0:l.constructor)!==c&&((r=l==null?void 0:l._$AO)===null||r===void 0||r.call(l,!1),c===void 0?l=void 0:(l=new c(s),l._$AT(s,t,i)),i!==void 0?((o=(d=t)._$Co)!==null&&o!==void 0?o:d._$Co=[])[i]=l:t._$Cl=l),l!==void 0&&(e=G(s,l._$AS(s,e.values),l,i)),e}class Jt{constructor(e,t){this.u=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(e){var t;const{el:{content:i},parts:n}=this._$AD,r=((t=e==null?void 0:e.creationScope)!==null&&t!==void 0?t:F).importNode(i,!0);W.currentNode=r;let o=W.nextNode(),d=0,l=0,c=n[0];for(;c!==void 0;){if(d===c.index){let p;c.type===2?p=new re(o,o.nextSibling,this,e):c.type===1?p=new c.ctor(o,c.name,c.strings,this,e):c.type===6&&(p=new es(o,this,e)),this.u.push(p),c=n[++l]}d!==(c==null?void 0:c.index)&&(o=W.nextNode(),d++)}return r}p(e){let t=0;for(const i of this.u)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class re{constructor(e,t,i,n){var r;this.type=2,this._$AH=g,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=n,this._$Cm=(r=n==null?void 0:n.isConnected)===null||r===void 0||r}get _$AU(){var e,t;return(t=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&t!==void 0?t:this._$Cm}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&e.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=G(this,e,t),Q(e)?e===g||e==null||e===""?(this._$AH!==g&&this._$AR(),this._$AH=g):e!==this._$AH&&e!==z&&this.g(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Gt(e)?this.k(e):this.g(e)}O(e,t=this._$AB){return this._$AA.parentNode.insertBefore(e,t)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}g(e){this._$AH!==g&&Q(this._$AH)?this._$AA.nextSibling.data=e:this.T(F.createTextNode(e)),this._$AH=e}$(e){var t;const{values:i,_$litType$:n}=e,r=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=ee.createElement(n.h,this.options)),n);if(((t=this._$AH)===null||t===void 0?void 0:t._$AD)===r)this._$AH.p(i);else{const o=new Jt(r,this),d=o.v(this.options);o.p(i),this.T(d),this._$AH=o}}_$AC(e){let t=ze.get(e.strings);return t===void 0&&ze.set(e.strings,t=new ee(e)),t}k(e){dt(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,n=0;for(const r of e)n===t.length?t.push(i=new re(this.O(Y()),this.O(Y()),this,this.options)):i=t[n],i._$AI(r),n++;n<t.length&&(this._$AR(i&&i._$AB.nextSibling,n),t.length=n)}_$AR(e=this._$AA.nextSibling,t){var i;for((i=this._$AP)===null||i===void 0||i.call(this,!1,!0,t);e&&e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){var t;this._$AM===void 0&&(this._$Cm=e,(t=this._$AP)===null||t===void 0||t.call(this,e))}}class ge{constructor(e,t,i,n,r){this.type=1,this._$AH=g,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=r,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=g}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,i,n){const r=this.strings;let o=!1;if(r===void 0)e=G(this,e,t,0),o=!Q(e)||e!==this._$AH&&e!==z,o&&(this._$AH=e);else{const d=e;let l,c;for(e=r[0],l=0;l<r.length-1;l++)c=G(this,d[i+l],t,l),c===z&&(c=this._$AH[l]),o||(o=!Q(c)||c!==this._$AH[l]),c===g?e=g:e!==g&&(e+=(c!=null?c:"")+r[l+1]),this._$AH[l]=c}o&&!n&&this.j(e)}j(e){e===g?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e!=null?e:"")}}class Xt extends ge{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===g?void 0:e}}const Zt=j?j.emptyScript:"";class Yt extends ge{constructor(){super(...arguments),this.type=4}j(e){e&&e!==g?this.element.setAttribute(this.name,Zt):this.element.removeAttribute(this.name)}}class Qt extends ge{constructor(e,t,i,n,r){super(e,t,i,n,r),this.type=5}_$AI(e,t=this){var i;if((e=(i=G(this,e,t,0))!==null&&i!==void 0?i:g)===z)return;const n=this._$AH,r=e===g&&n!==g||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,o=e!==g&&(n===g||r);r&&this.element.removeEventListener(this.name,this,n),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,i;typeof this._$AH=="function"?this._$AH.call((i=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&i!==void 0?i:this.element,e):this._$AH.handleEvent(e)}}class es{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){G(this,e)}}const Ge=ce.litHtmlPolyfillSupport;Ge==null||Ge(ee,re),((ye=ce.litHtmlVersions)!==null&&ye!==void 0?ye:ce.litHtmlVersions=[]).push("2.5.0");const ts=(s,e,t)=>{var i,n;const r=(i=t==null?void 0:t.renderBefore)!==null&&i!==void 0?i:e;let o=r._$litPart$;if(o===void 0){const d=(n=t==null?void 0:t.renderBefore)!==null&&n!==void 0?n:null;r._$litPart$=o=new re(e.insertBefore(Y(),d),d,void 0,t!=null?t:{})}return o._$AI(s),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Ee,_e;class X extends D{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const i=super.createRenderRoot();return(e=(t=this.renderOptions).renderBefore)!==null&&e!==void 0||(t.renderBefore=i.firstChild),i}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=ts(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return z}}X.finalized=!0,X._$litElement$=!0,(Ee=globalThis.litElementHydrateSupport)===null||Ee===void 0||Ee.call(globalThis,{LitElement:X});const qe=globalThis.litElementPolyfillSupport;qe==null||qe({LitElement:X});((_e=globalThis.litElementVersions)!==null&&_e!==void 0?_e:globalThis.litElementVersions=[]).push("3.2.2");class ss{constructor(e){K(this,"host");(this.host=e).addController(this)}hostConnected(){if(this.host.setAttribute("role","option"),this.host.setAttribute("aria-selected",""),this.host.hasAttribute("value")){let e=this.host.getAttribute("value");this.host.setAttribute("id",`${Ke(e)}-item`)}this.host.setAttribute("tabindex","-1")}hostUpdated(){let e=this.host.hasAttribute("selected");if(this.host.setAttribute("aria-selected",e),this.host.hasAttribute("value")){let t=this.host.getAttribute("value");this.host.setAttribute("id",`${Ke(t)}-item`)}}}function Ke(s){let e=s.split(" ").join("-");for(;e.includes("'");)e=e.replace("'","");return e}class de extends X{constructor(){super();K(this,"ariaController",new ss(this));this.selected=!1,this.dlc="",this.value="",this.count=0}handleCheckboxChange(t){this.selected=!this.selected}render(){return Fe`
        <li>
            
            <span>
                <slot></slot>
                ${this.dlc?Fe`
                <sup tabindex="-1" class="pill dlc"> ${this.dlc}</sup>
                `:g}
                <span>
                    <slot name="multipliers"></slot>
                </span>
            </span>
        </li>
        `}}K(de,"properties",{selected:{type:Boolean,reflect:!0},dlc:{type:String,reflect:!0},value:{type:String,reflect:!0},count:{type:Number,reflect:!0}}),K(de,"styles",Vt`
    li {
    border-bottom: 1px var(--main-border-color) solid;
    padding: .5rem;
    border-radius: 0.5em;
    margin-top: 0.25rem;
    margin-bottom: 0.25rem;
}

li:focus, li:hover {
    color: var(--main-text-color-hover);
    outline: var(--main-border-color-hover) solid 1px;
}
    `);customElements.define("ingredient-list-item",de);const is=new Map([["Dawnguard","DG"],["Dragonborn","DB"],["Hearthfire","HF"]]);function Je(s,e){const t=document.createElement("ingredient-list-item");t.value=s.name;const i=document.createElement("span");if(i.textContent=s.name,e!==null&&typeof e<"u"&&e.effectSearchTerm!=="All"&&(s.effectNames[0]===e.effectSearchTerm&&i.classList.add("first-effect"),s.dlc!=="Vanilla"&&(t.dlc=is.get(s.dlc)),e.effectSearchTerm!=="All")){const n=s.effects[s.effectNames.indexOf(e.effectSearchTerm)],{cost:{multiplier:r},duration:{multiplier:o},magnitude:{multiplier:d}}=n;if(!Number.isInteger(r)){const l=document.createElement("sup");l.textContent=`${r}x Cost`,l.tabIndex=-1,l.slot="multipliers",l.classList.add("pill","multiplier"),t.appendChild(l)}if(!Number.isInteger(o)){const l=document.createElement("sup");l.textContent=`${o}x Dur`,l.tabIndex=-1,l.slot="multipliers",l.classList.add("pill","multiplier"),t.appendChild(l)}if(!Number.isInteger(d)){const l=document.createElement("sup");l.textContent=`${d}x Mag`,l.tabIndex=-1,l.slot="multipliers",l.classList.add("pill","multiplier"),t.appendChild(l)}}return t.append(i),t}var y,E,ie,k,T,ne,Se,N,H,we,rs,Ie,os,ue,ut,pe,pt,fe,ft;class ns{constructor(e,t=new le){f(this,ne);f(this,N);f(this,we);f(this,Ie);f(this,ue);f(this,pe);f(this,fe);f(this,y,void 0);f(this,E,void 0);f(this,ie,void 0);f(this,k,new Map);f(this,T,void 0);_(this,E,t),_(this,y,e),_(this,ie,new MutationObserver(i=>{for(const n of i)if(n.type==="childList"){const{addedNodes:r,removedNodes:o}=n;if(o.length>0)for(const d of o.values())a(this,k).delete(d.value);if(r.length>0)for(const d of r.values())a(this,k).set(d.value,d);console.dir(a(this,k))}})),a(this,ie).observe(a(this,y),{childList:!0}),a(this,y).addEventListener("click",this),a(this,y).addEventListener("keydown",this)}replaceWithNoResults(){const e=document.createDocumentFragment(),t=R("p",{content:"No results."});e.appendChild(t),a(this,y).replaceChildren(e)}select(e){let t=e;typeof e=="string"&&(t=a(this,k).get(e)),t.selected=!0,a(this,E).selectIngredient(t.value)}deselect(e){let t=e;typeof e=="string"&&(t=a(this,k).get(e)),a(this,E).unselectIngredient(t.value),t.selected=!1}addAll(e,t=null){const i=new DocumentFragment;for(let n of e){const r=Je(n,t);a(this,E).hasIngredient(n.name)&&this.select(r),i.appendChild(r)}a(this,y).appendChild(i)}replaceChildrenWith(e=[],t=null){const i=new DocumentFragment;for(let n of e){const r=Je(n,t);a(this,E).hasIngredient(n.name)&&this.select(r),i.appendChild(r)}a(this,y).replaceChildren(i)}reset(){a(this,E).clear()}handleEvent(e){switch(e.type){case"click":e.preventDefault();const i=e.target.closest("ingredient-list-item");b(this,N,H).call(this,i),b(this,ne,Se).call(this,i);break;case"keydown":b(this,fe,ft).call(this,e);break}}}y=new WeakMap,E=new WeakMap,ie=new WeakMap,k=new WeakMap,T=new WeakMap,ne=new WeakSet,Se=function(e){const{value:t}=e;!a(this,E).hasIngredient(t)&&a(this,E).canSelectMore()?(a(this,E).selectIngredient(t),wt(e,t)):a(this,E).hasIngredient(t)?(a(this,E).unselectIngredient(t),ot(e,t)):(e.selected=!1,It(e))},N=new WeakSet,H=function(e){_(this,T,e.id),a(this,y).setAttribute("aria-activedescendant",a(this,T)),e.focus()},we=new WeakSet,rs=function(){_(this,T,null),a(this,y).setAttribute("aria-activedescendant",null)},Ie=new WeakSet,os=function(){},ue=new WeakSet,ut=function(e){let t=null;return be(e.nextElementSibling)||(t=e.nextElementSibling),t},pe=new WeakSet,pt=function(e){let t=null;return be(e.previousElementSibling)||(t=e.previousElementSibling),t},fe=new WeakSet,ft=function(e){const t=a(this,y).querySelectorAll("ingredient-list-item"),i=a(this,y).querySelector(`#${a(this,y).getAttribute("aria-activedescendant")}`);let n=i;if(!!i)switch(e.key){case"ArrowDown":if(!a(this,T)){b(this,N,H).call(this,t[0]);break}n=b(this,ue,ut).call(this,i),n&&(b(this,N,H).call(this,n),e.preventDefault());break;case"ArrowUp":if(!a(this,T)){b(this,N,H).call(this,t[0]);break}n=b(this,pe,pt).call(this,i),n&&(b(this,N,H).call(this,n),e.preventDefault());break;case" ":const r=i;b(this,ne,Se).call(this,r),e.preventDefault();break}};const w=new Tt("scripts/infrastructure/worker/alchemy-worker-script.js"),U=new $t;w.onWorkerReady(_s);w.onIngredientSearchResult(ms);w.onPopulateIngredientList(ys);w.onCalculateResult(gs);w.onWorkerError(fs);window.addEventListener("beforeunload",s=>{console.info("Terminating Worker"),w.terminate()});const te=U.id("brew-potion");te.addEventListener("submit",bs);const Z=document.querySelector("#toast-new-version");Z.returnValue="cancel";document.querySelector("#new-version-cancel").addEventListener("click",()=>{Z.close()});const ls=document.querySelector("#toast-offline-ready"),as=Dt({onNeedRefresh(){Z.show(),Z.addEventListener("close",()=>{Z.returnValue==="refresh"&&as(!0)},{once:!0})},onOfflineReady(){ls.show()}}),cs=document.getElementById("selection-mediator"),se=U.id("ingredient-filter");se.addEventListener("submit",$s);const ds=U.id("query-interpretation"),q=U.id("ingredient-list"),hs=U.id("chosen-ingredients"),he=U.id("possible-potions"),us=U.id("hit-count"),Ce=[],Te=new le,O=new ns(q,Te),Ne=new Mt(hs),Xe=te.elements[te.elements.length-2],ps=3;se.elements[ps].addEventListener("change",s=>{s.target.ariaChecked=s.target.checked});se.addEventListener("reset",s=>{O.reset(),Ne.clear(),Ce.length=0,setTimeout(()=>se.requestSubmit(),0)},{passive:!0});te.addEventListener("reset",s=>{const e=R("li",{children:[R("p",{content:"Choose two to three ingredients."})]});he.replaceChildren(e)});q.addEventListener(it,s=>{const e=s.detail.ingredientName;let t=s.target;console.assert(t instanceof de,"Exepected an input element."),Xe.validationMessage.length>0&&Xe.setCustomValidity(""),O.select(t),console.info(`${e} selected`),Ne.addIngredient(e)});cs.addEventListener(nt,s=>{const e=s.detail.ingredientName;if(q.contains(s.target)){let t=s.target;O.deselect(t),console.info(`${e} deselected`),Ne.removeIngredient(e)}else console.debug(`chosen ingredient deselected evt listener: Ingredient ${e} deselected.`),Te.unselectIngredient(e),O.deselect(e)});q.addEventListener(rt,Es);function fs({detail:{payload:s}}){console.error(`Error: ${s}`)}function gs({detail:{payload:s}}){console.info("Worker calculation results: ",s);let e=[];if(s.size>0)s.forEach((t,i)=>{let n=Ze(t,i);e.push(n)});else{const t=Ze({name:"Potion Failed",didSucceed:!1});e.push(t)}he.replaceChildren(...e)}function Ze({name:s,didSucceed:e,effects:t,gold:i},n=""){const r=document.createDocumentFragment(),o=R("li"),d=R("h2",{content:s});if(o.appendChild(d),e){const l=R("p",{content:`Description: ${t}`});o.appendChild(l);const c=R("p",{content:`Gold: ${i}`});o.appendChild(c);const p=R("i",{content:`Recipe: ${n}`});o.appendChild(p)}return r.appendChild(o),r}function ms({detail:{payload:s}}){console.debug("Search result incoming",s),Array.isArray(s.results)&&(s.results.length>0?(O.replaceChildrenWith(s.results,s.query),gt(s.results.length)):O.replaceWithNoResults())}function vs(s,e,t){return`Showing ingredients sharing "${s}", sorted by ${e}, and part of ${Wt(t)}`}function $s(s){s.preventDefault(),console.assert(s.defaultPrevented),console.debug("Ingredient Search submitted.");const e=new FormData(se);let t=["Vanilla"],i=e.get("by-effect"),n=e.get("effect-sort-order");t.push(...e.getAll("installed-dlc")),console.debug("Ingredient search form submitting ",Array.from(e.entries())),ds.textContent=vs(i,n,t),q.ariaSort=n==="asc"?"ascending":"descending",w.sendSearchMessage(i,n,t)}function ys({detail:{payload:s}}){console.assert(Array.isArray(s),"Populate results payload was not an array"),O.replaceChildrenWith(s),gt(s.length)}function gt(s){us.textContent=`${s}`}function Es(s){const e=q;Ce.push(e),e.ariaInvalid="true",setTimeout(()=>{let t=Ce.pop();be(t)||(t.ariaInvalid="false")},1e3)}function _s(){w.sendPopulateMessage()}function bs(s){s.preventDefault();const e=s.submitter;if(Array.from(Te.selectedIngredients).length<Et){e.setCustomValidity("Expected 2 to 3 ingredients to be selected."),e.reportValidity();return}const i=new FormData(te);e.setCustomValidity(""),As(i),he.hasChildNodes()&&(console.debug("Attempting to remove default text"),he.replaceChildren())}function As(s){let e=s.has("physician-perk"),t=s.has("benefactor-perk"),i=s.has("poisoner-perk"),n=s.getAll("selected-ingredients");console.assert(n.length>0,"Selected ingredients can't be empty.");let r=Number(s.get("alchemist-perk")),o=Number(s.get("skill-level")),d=Number(s.get("fortify-alchemy"));s.forEach(([l,c])=>console.debug(`Debugging Send Calculate Message: ${c}, ${l}`)),w.sendCalculateMessage(n,o,r,e,t,i,d)}
