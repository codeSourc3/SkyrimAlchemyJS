var gt=Object.defineProperty;var mt=(s,e,t)=>e in s?gt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var G=(s,e,t)=>(mt(s,typeof e!="symbol"?e+"":e,t),t),ge=(s,e,t)=>{if(!e.has(s))throw TypeError("Cannot "+t)};var l=(s,e,t)=>(ge(s,e,"read from private field"),t?t.call(s):e.get(s)),p=(s,e,t)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,t)},y=(s,e,t,i)=>(ge(s,e,"write to private field"),i?i.call(s,t):e.set(s,t),t);var _=(s,e,t)=>(ge(s,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();function w(s,{content:e="",classes:t=[],id:i="",parent:n,children:r=[]}={}){const o=document.createElement(s);return e.length>0&&(o.textContent=e),i.length>0&&(o.id=i),n instanceof HTMLElement&&n.appendChild(o),t.length>0&&o.classList.add(...t),r.length>0&&o.append(...r),o}var H;class vt{constructor(){p(this,H,new Map)}id(e){if(l(this,H).has(e))return l(this,H).get(e);{const t=document.getElementById(e);return l(this,H).set(e,t),t}}}H=new WeakMap;const $t=3,Et=2;function R(s,e,t=null,i={bubbles:!1,cancelable:!1,composed:!1}){let n;return t!==null?n=new CustomEvent(s,{...i,detail:t}):n=new Event(s,i),e.dispatchEvent(n)}const Ze="worker-ready",Ye="populate-ingredient-list",Qe="ingredient-search-result",et="calculate-potion-result",tt="worker-error",yt=s=>R(Ze,s,null,{bubbles:!0}),_t=(s,e)=>R(Ye,s,{payload:e},{bubbles:!0}),bt=(s,e)=>R(Qe,s,{payload:e},{bubbles:!0,cancelable:!0}),At=(s,e)=>R(et,s,{payload:e},{bubbles:!0,cancelable:!0}),St=(s,e)=>R(tt,s,{payload:e},{bubbles:!0,cancelable:!0}),st="ingredient-selected",Ie="ingredient-deselected",it="max-ingredients-selected",Ct=(s,e)=>R(st,s,{ingredientName:e},{bubbles:!0,cancelable:!0}),nt=(s,e)=>R(Ie,s,{ingredientName:e},{bubbles:!0,cancelable:!0}),wt=s=>R(it,s,null,{bubbles:!0});function Le(s,e={}){return{type:s,payload:e}}function It(s,e,t){return Le("search",{effectSearchTerm:s,effectOrder:e,dlc:t})}function Lt(){return Le("populate")}function Nt(s,e=15,t=0,i=!1,n=!1,r=!1,o=0){return Le("calculate",{names:s,skill:e,alchemist:t,hasBenefactor:n,hasPhysician:i,hasPoisoner:r,fortifyAlchemy:o})}const x={target:null,["worker-ready"](){yt(this.target)},["search-result"](s){bt(this.target,s)},["populate-result"](s){console.assert(Array.isArray(s),"Message handler switch docs need updating."),_t(this.target,s)},["calculate-result"](s){console.dir(s),At(this.target,s)},["worker-error"](s){St(this.target,s)},default(s){this.onUnknownMessage(s)},onUnknownMessage:null};var W,g;class Mt{constructor(){p(this,W,void 0);p(this,g,void 0);y(this,W,new Worker(new URL("/SkyrimAlchemyJS/assets/alchemy-worker-script.4cc2e223.js",self.location),{type:"module",name:"mixer"}));const e=new MessageChannel;y(this,g,e.port1),this.onUnknownMessage=i=>console.debug(`${i} is not a valid message type.`),x.target=l(this,g),x["calculate-result"].bind(l(this,g)),x["populate-result"].bind(l(this,g)),x.onUnknownMessage=this.onUnknownMessage;const t=i=>{console.log(`Message ${i.type}`);const{type:n,payload:r}=i.data;let o=String(n);o in x?x[o](r):x.default(n)};l(this,g).addEventListener("message",t),l(this,g).start(),l(this,W).postMessage({type:"init"},[e.port2])}onWorkerReady(e){typeof e=="function"&&l(this,g).addEventListener(Ze,e)}onIngredientSearchResult(e){typeof e=="function"&&l(this,g).addEventListener(Qe,e)}onPopulateIngredientList(e){typeof e=="function"&&l(this,g).addEventListener(Ye,e)}onCalculateResult(e){typeof e=="function"&&l(this,g).addEventListener(et,e)}onWorkerError(e){typeof e=="function"&&l(this,g).addEventListener(tt,e)}postMessage(e){l(this,g).postMessage(e)}sendSearchMessage(e,t,i){const n=It(e,t,i);l(this,g).postMessage(n)}sendPopulateMessage(){const e=Lt();l(this,g).postMessage(e)}sendCalculateMessage(e,t=15,i=0,n=!1,r=!1,o=!1,d=0){const a=Nt(e,t,i,n,r,o,d);l(this,g).postMessage(a)}terminate(){l(this,W).terminate()}static get WORKER_READY(){return"worker-ready"}static get POPULATE_INGREDIENT_LIST(){return"populate-ingredient-list"}static get INGREDIENT_SEARCH_RESULT(){return"ingredient-search-result"}static get CALCULATE_POTION_RESULT(){return"calculate-potion-result"}static get WORKER_ERROR(){return"worker-error"}}W=new WeakMap,g=new WeakMap;var A;const Te=class{constructor(e=new Set){p(this,A,void 0);y(this,A,e)}static get MAX_INGREDIENTS(){return $t}get selectedIngredients(){return l(this,A)}selectIngredient(e){l(this,A).add(e)}unselectIngredient(e){return l(this,A).delete(e)}hasIngredient(e){return l(this,A).has(e)}clear(){l(this,A).clear()}canSelectMore(){return l(this,A).size<Te.MAX_INGREDIENTS}};let oe=Te;A=new WeakMap;function Rt(s,e){s.isConnected&&s.setAttribute("form",e)}function xt(s){const e=document.createElement("li"),t=document.createElement("button");t.type="button",t.value=s,t.textContent=s;const i=document.createElement("input");return i.type="hidden",i.name="selected-ingredients",i.id=s.replace(" ","-").toLowerCase(),i.value=s,e.appendChild(t),e.appendChild(i),e}var b,S;class Tt{constructor(e,t=new Set){p(this,b,void 0);p(this,S,void 0);y(this,b,e),y(this,S,t),l(this,b).addEventListener("click",this)}hasIngredient(e){return l(this,S).has(e)}addIngredient(e){if(typeof e!="string")throw new TypeError(`ingredientName must be a string, not ${typeof e}`);l(this,S).has(e)&&e.length===0||(l(this,S).add(e),this.addToList(e))}removeIngredient(e){l(this,S).delete(e)&&this.removeFromList(e)}addToList(e){const t=xt(e);l(this,b).appendChild(t),Rt(t.lastElementChild,"brew-potion")}removeFromList(e){const t=l(this,b).children.length;for(let i=0;i<t;i++){const n=l(this,b).children[i];if(n.textContent===e){l(this,b).removeChild(n);break}}}addAll(e){for(let t of e)this.addIngredient(t)}clear(){l(this,b).replaceChildren(),l(this,S).clear()}handleEvent(e){const t=e.target,{value:i}=t;this.hasIngredient(i)&&(this.removeIngredient(i),nt(l(this,b),i))}}b=new WeakMap,S=new WeakMap;const kt=new Intl.ListFormat(navigator.language);function Pt(s){return kt.format(s)}function _e(s){return typeof s>"u"||s===null}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const re=window,Ne=re.ShadowRoot&&(re.ShadyCSS===void 0||re.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Me=Symbol(),ke=new WeakMap;class rt{constructor(e,t,i){if(this._$cssResult$=!0,i!==Me)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(Ne&&e===void 0){const i=t!==void 0&&t.length===1;i&&(e=ke.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&ke.set(t,e))}return e}toString(){return this.cssText}}const Ot=s=>new rt(typeof s=="string"?s:s+"",void 0,Me),Ut=(s,...e)=>{const t=s.length===1?s[0]:e.reduce((i,n,r)=>i+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+s[r+1],s[0]);return new rt(t,s,Me)},Dt=(s,e)=>{Ne?s.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet):e.forEach(t=>{const i=document.createElement("style"),n=re.litNonce;n!==void 0&&i.setAttribute("nonce",n),i.textContent=t.cssText,s.appendChild(i)})},Pe=Ne?s=>s:s=>s instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return Ot(t)})(s):s;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var me;const le=window,Oe=le.trustedTypes,Ht=Oe?Oe.emptyScript:"",Ue=le.reactiveElementPolyfillSupport,be={toAttribute(s,e){switch(e){case Boolean:s=s?Ht:null;break;case Object:case Array:s=s==null?s:JSON.stringify(s)}return s},fromAttribute(s,e){let t=s;switch(e){case Boolean:t=s!==null;break;case Number:t=s===null?null:Number(s);break;case Object:case Array:try{t=JSON.parse(s)}catch{t=null}}return t}},ot=(s,e)=>e!==s&&(e==e||s==s),ve={attribute:!0,type:String,converter:be,reflect:!1,hasChanged:ot};class O extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var t;this.finalize(),((t=this.h)!==null&&t!==void 0?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((t,i)=>{const n=this._$Ep(i,t);n!==void 0&&(this._$Ev.set(n,i),e.push(n))}),e}static createProperty(e,t=ve){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const i=typeof e=="symbol"?Symbol():"__"+e,n=this.getPropertyDescriptor(e,i,t);n!==void 0&&Object.defineProperty(this.prototype,e,n)}}static getPropertyDescriptor(e,t,i){return{get(){return this[t]},set(n){const r=this[e];this[t]=n,this.requestUpdate(e,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||ve}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,i=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const n of i)this.createProperty(n,t[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const n of i)t.unshift(Pe(n))}else e!==void 0&&t.push(Pe(e));return t}static _$Ep(e,t){const i=t.attribute;return i===!1?void 0:typeof i=="string"?i:typeof e=="string"?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(t=>t(this))}addController(e){var t,i;((t=this._$ES)!==null&&t!==void 0?t:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((i=e.hostConnected)===null||i===void 0||i.call(e))}removeController(e){var t;(t=this._$ES)===null||t===void 0||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])})}createRenderRoot(){var e;const t=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return Dt(t,this.constructor.elementStyles),t}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(t=>{var i;return(i=t.hostConnected)===null||i===void 0?void 0:i.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(t=>{var i;return(i=t.hostDisconnected)===null||i===void 0?void 0:i.call(t)})}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$EO(e,t,i=ve){var n;const r=this.constructor._$Ep(e,i);if(r!==void 0&&i.reflect===!0){const o=(((n=i.converter)===null||n===void 0?void 0:n.toAttribute)!==void 0?i.converter:be).toAttribute(t,i.type);this._$El=e,o==null?this.removeAttribute(r):this.setAttribute(r,o),this._$El=null}}_$AK(e,t){var i;const n=this.constructor,r=n._$Ev.get(e);if(r!==void 0&&this._$El!==r){const o=n.getPropertyOptions(r),d=typeof o.converter=="function"?{fromAttribute:o.converter}:((i=o.converter)===null||i===void 0?void 0:i.fromAttribute)!==void 0?o.converter:be;this._$El=r,this[r]=d.fromAttribute(t,o.type),this._$El=null}}requestUpdate(e,t,i){let n=!0;e!==void 0&&(((i=i||this.constructor.getPropertyOptions(e)).hasChanged||ot)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),i.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,i))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((n,r)=>this[r]=n),this._$Ei=void 0);let t=!1;const i=this._$AL;try{t=this.shouldUpdate(i),t?(this.willUpdate(i),(e=this._$ES)===null||e===void 0||e.forEach(n=>{var r;return(r=n.hostUpdate)===null||r===void 0?void 0:r.call(n)}),this.update(i)):this._$Ek()}catch(n){throw t=!1,this._$Ek(),n}t&&this._$AE(i)}willUpdate(e){}_$AE(e){var t;(t=this._$ES)===null||t===void 0||t.forEach(i=>{var n;return(n=i.hostUpdated)===null||n===void 0?void 0:n.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((t,i)=>this._$EO(i,this[i],t)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}O.finalized=!0,O.elementProperties=new Map,O.elementStyles=[],O.shadowRootOptions={mode:"open"},Ue==null||Ue({ReactiveElement:O}),((me=le.reactiveElementVersions)!==null&&me!==void 0?me:le.reactiveElementVersions=[]).push("1.5.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var $e;const ae=window,B=ae.trustedTypes,De=B?B.createPolicy("lit-html",{createHTML:s=>s}):void 0,I=`lit$${(Math.random()+"").slice(9)}$`,lt="?"+I,Wt=`<${lt}>`,F=document,X=(s="")=>F.createComment(s),J=s=>s===null||typeof s!="object"&&typeof s!="function",at=Array.isArray,Bt=s=>at(s)||typeof(s==null?void 0:s[Symbol.iterator])=="function",K=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,He=/-->/g,We=/>/g,T=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Be=/'/g,Fe=/"/g,ct=/^(?:script|style|textarea|title)$/i,Ft=s=>(e,...t)=>({_$litType$:s,strings:e,values:t}),je=Ft(1),j=Symbol.for("lit-noChange"),f=Symbol.for("lit-nothing"),ze=new WeakMap,D=F.createTreeWalker(F,129,null,!1),jt=(s,e)=>{const t=s.length-1,i=[];let n,r=e===2?"<svg>":"",o=K;for(let a=0;a<t;a++){const c=s[a];let $,h,u=-1,E=0;for(;E<c.length&&(o.lastIndex=E,h=o.exec(c),h!==null);)E=o.lastIndex,o===K?h[1]==="!--"?o=He:h[1]!==void 0?o=We:h[2]!==void 0?(ct.test(h[2])&&(n=RegExp("</"+h[2],"g")),o=T):h[3]!==void 0&&(o=T):o===T?h[0]===">"?(o=n!=null?n:K,u=-1):h[1]===void 0?u=-2:(u=o.lastIndex-h[2].length,$=h[1],o=h[3]===void 0?T:h[3]==='"'?Fe:Be):o===Fe||o===Be?o=T:o===He||o===We?o=K:(o=T,n=void 0);const ie=o===T&&s[a+1].startsWith("/>")?" ":"";r+=o===K?c+Wt:u>=0?(i.push($),c.slice(0,u)+"$lit$"+c.slice(u)+I+ie):c+I+(u===-2?(i.push(void 0),a):ie)}const d=r+(s[t]||"<?>")+(e===2?"</svg>":"");if(!Array.isArray(s)||!s.hasOwnProperty("raw"))throw Error("invalid template strings array");return[De!==void 0?De.createHTML(d):d,i]};class Z{constructor({strings:e,_$litType$:t},i){let n;this.parts=[];let r=0,o=0;const d=e.length-1,a=this.parts,[c,$]=jt(e,t);if(this.el=Z.createElement(c,i),D.currentNode=this.el.content,t===2){const h=this.el.content,u=h.firstChild;u.remove(),h.append(...u.childNodes)}for(;(n=D.nextNode())!==null&&a.length<d;){if(n.nodeType===1){if(n.hasAttributes()){const h=[];for(const u of n.getAttributeNames())if(u.endsWith("$lit$")||u.startsWith(I)){const E=$[o++];if(h.push(u),E!==void 0){const ie=n.getAttribute(E.toLowerCase()+"$lit$").split(I),ne=/([.?@])?(.*)/.exec(E);a.push({type:1,index:r,name:ne[2],strings:ie,ctor:ne[1]==="."?Vt:ne[1]==="?"?Kt:ne[1]==="@"?qt:fe})}else a.push({type:6,index:r})}for(const u of h)n.removeAttribute(u)}if(ct.test(n.tagName)){const h=n.textContent.split(I),u=h.length-1;if(u>0){n.textContent=B?B.emptyScript:"";for(let E=0;E<u;E++)n.append(h[E],X()),D.nextNode(),a.push({type:2,index:++r});n.append(h[u],X())}}}else if(n.nodeType===8)if(n.data===lt)a.push({type:2,index:r});else{let h=-1;for(;(h=n.data.indexOf(I,h+1))!==-1;)a.push({type:7,index:r}),h+=I.length-1}r++}}static createElement(e,t){const i=F.createElement("template");return i.innerHTML=e,i}}function z(s,e,t=s,i){var n,r,o,d;if(e===j)return e;let a=i!==void 0?(n=t._$Co)===null||n===void 0?void 0:n[i]:t._$Cl;const c=J(e)?void 0:e._$litDirective$;return(a==null?void 0:a.constructor)!==c&&((r=a==null?void 0:a._$AO)===null||r===void 0||r.call(a,!1),c===void 0?a=void 0:(a=new c(s),a._$AT(s,t,i)),i!==void 0?((o=(d=t)._$Co)!==null&&o!==void 0?o:d._$Co=[])[i]=a:t._$Cl=a),a!==void 0&&(e=z(s,a._$AS(s,e.values),a,i)),e}class zt{constructor(e,t){this.u=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(e){var t;const{el:{content:i},parts:n}=this._$AD,r=((t=e==null?void 0:e.creationScope)!==null&&t!==void 0?t:F).importNode(i,!0);D.currentNode=r;let o=D.nextNode(),d=0,a=0,c=n[0];for(;c!==void 0;){if(d===c.index){let $;c.type===2?$=new se(o,o.nextSibling,this,e):c.type===1?$=new c.ctor(o,c.name,c.strings,this,e):c.type===6&&($=new Xt(o,this,e)),this.u.push($),c=n[++a]}d!==(c==null?void 0:c.index)&&(o=D.nextNode(),d++)}return r}p(e){let t=0;for(const i of this.u)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class se{constructor(e,t,i,n){var r;this.type=2,this._$AH=f,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=n,this._$Cm=(r=n==null?void 0:n.isConnected)===null||r===void 0||r}get _$AU(){var e,t;return(t=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&t!==void 0?t:this._$Cm}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&e.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=z(this,e,t),J(e)?e===f||e==null||e===""?(this._$AH!==f&&this._$AR(),this._$AH=f):e!==this._$AH&&e!==j&&this.g(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Bt(e)?this.k(e):this.g(e)}O(e,t=this._$AB){return this._$AA.parentNode.insertBefore(e,t)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}g(e){this._$AH!==f&&J(this._$AH)?this._$AA.nextSibling.data=e:this.T(F.createTextNode(e)),this._$AH=e}$(e){var t;const{values:i,_$litType$:n}=e,r=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=Z.createElement(n.h,this.options)),n);if(((t=this._$AH)===null||t===void 0?void 0:t._$AD)===r)this._$AH.p(i);else{const o=new zt(r,this),d=o.v(this.options);o.p(i),this.T(d),this._$AH=o}}_$AC(e){let t=ze.get(e.strings);return t===void 0&&ze.set(e.strings,t=new Z(e)),t}k(e){at(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,n=0;for(const r of e)n===t.length?t.push(i=new se(this.O(X()),this.O(X()),this,this.options)):i=t[n],i._$AI(r),n++;n<t.length&&(this._$AR(i&&i._$AB.nextSibling,n),t.length=n)}_$AR(e=this._$AA.nextSibling,t){var i;for((i=this._$AP)===null||i===void 0||i.call(this,!1,!0,t);e&&e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){var t;this._$AM===void 0&&(this._$Cm=e,(t=this._$AP)===null||t===void 0||t.call(this,e))}}class fe{constructor(e,t,i,n,r){this.type=1,this._$AH=f,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=r,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=f}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,i,n){const r=this.strings;let o=!1;if(r===void 0)e=z(this,e,t,0),o=!J(e)||e!==this._$AH&&e!==j,o&&(this._$AH=e);else{const d=e;let a,c;for(e=r[0],a=0;a<r.length-1;a++)c=z(this,d[i+a],t,a),c===j&&(c=this._$AH[a]),o||(o=!J(c)||c!==this._$AH[a]),c===f?e=f:e!==f&&(e+=(c!=null?c:"")+r[a+1]),this._$AH[a]=c}o&&!n&&this.j(e)}j(e){e===f?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e!=null?e:"")}}class Vt extends fe{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===f?void 0:e}}const Gt=B?B.emptyScript:"";class Kt extends fe{constructor(){super(...arguments),this.type=4}j(e){e&&e!==f?this.element.setAttribute(this.name,Gt):this.element.removeAttribute(this.name)}}class qt extends fe{constructor(e,t,i,n,r){super(e,t,i,n,r),this.type=5}_$AI(e,t=this){var i;if((e=(i=z(this,e,t,0))!==null&&i!==void 0?i:f)===j)return;const n=this._$AH,r=e===f&&n!==f||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,o=e!==f&&(n===f||r);r&&this.element.removeEventListener(this.name,this,n),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,i;typeof this._$AH=="function"?this._$AH.call((i=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&i!==void 0?i:this.element,e):this._$AH.handleEvent(e)}}class Xt{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){z(this,e)}}const Ve=ae.litHtmlPolyfillSupport;Ve==null||Ve(Z,se),(($e=ae.litHtmlVersions)!==null&&$e!==void 0?$e:ae.litHtmlVersions=[]).push("2.5.0");const Jt=(s,e,t)=>{var i,n;const r=(i=t==null?void 0:t.renderBefore)!==null&&i!==void 0?i:e;let o=r._$litPart$;if(o===void 0){const d=(n=t==null?void 0:t.renderBefore)!==null&&n!==void 0?n:null;r._$litPart$=o=new se(e.insertBefore(X(),d),d,void 0,t!=null?t:{})}return o._$AI(s),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Ee,ye;class q extends O{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const i=super.createRenderRoot();return(e=(t=this.renderOptions).renderBefore)!==null&&e!==void 0||(t.renderBefore=i.firstChild),i}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Jt(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return j}}q.finalized=!0,q._$litElement$=!0,(Ee=globalThis.litElementHydrateSupport)===null||Ee===void 0||Ee.call(globalThis,{LitElement:q});const Ge=globalThis.litElementPolyfillSupport;Ge==null||Ge({LitElement:q});((ye=globalThis.litElementVersions)!==null&&ye!==void 0?ye:globalThis.litElementVersions=[]).push("3.2.2");class Zt{constructor(e){G(this,"host");(this.host=e).addController(this)}hostConnected(){if(this.host.setAttribute("role","option"),this.host.setAttribute("aria-selected",""),this.host.hasAttribute("value")){let e=this.host.getAttribute("value");this.host.setAttribute("id",`${Ke(e)}-item`)}this.host.setAttribute("tabindex","-1")}hostUpdated(){let e=this.host.hasAttribute("selected");if(this.host.setAttribute("aria-selected",e),this.host.hasAttribute("value")){let t=this.host.getAttribute("value");this.host.setAttribute("id",`${Ke(t)}-item`)}}}function Ke(s){let e=s.split(" ").join("-");for(;e.includes("'");)e=e.replace("'","");return e}class ce extends q{constructor(){super();G(this,"ariaController",new Zt(this));this.selected=!1,this.dlc="",this.value="",this.count=0}handleCheckboxChange(t){this.selected=!this.selected}render(){return je`
        <li>
            
            <span>
                <slot></slot>
                ${this.dlc?je`
                <sup tabindex="-1" class="pill dlc"> ${this.dlc}</sup>
                `:f}
                <span>
                    <slot name="multipliers"></slot>
                </span>
            </span>
        </li>
        `}}G(ce,"properties",{selected:{type:Boolean,reflect:!0},dlc:{type:String,reflect:!0},value:{type:String,reflect:!0},count:{type:Number,reflect:!0}}),G(ce,"styles",Ut`
    li {
    border-bottom: 1px var(--main-border-color) solid;
    padding: .5rem;
    border-radius: 0.5em;
    margin-top: 0.25rem;
    margin-bottom: 0.25rem;
}

li:focus, li:hover {
    color: var(--main-text-color-hover);
    outline: var(--main-border-color-hover) solid 1px;
}
    `);customElements.define("ingredient-list-item",ce);const Yt=new Map([["Dawnguard","DG"],["Dragonborn","DB"],["Hearthfire","HF"]]);function qe(s,e){const t=document.createElement("ingredient-list-item");t.value=s.name;const i=document.createElement("span");if(i.textContent=s.name,e!==null&&typeof e<"u"&&e.effectSearchTerm!=="All"&&(s.effectNames[0]===e.effectSearchTerm&&i.classList.add("first-effect"),s.dlc!=="Vanilla"&&(t.dlc=Yt.get(s.dlc)),e.effectSearchTerm!=="All")){const n=s.effects[s.effectNames.indexOf(e.effectSearchTerm)],{cost:{multiplier:r},duration:{multiplier:o},magnitude:{multiplier:d}}=n;if(!Number.isInteger(r)){const a=document.createElement("sup");a.textContent=`${r}x Cost`,a.tabIndex=-1,a.slot="multipliers",a.classList.add("pill","multiplier"),t.appendChild(a)}if(!Number.isInteger(o)){const a=document.createElement("sup");a.textContent=`${o}x Dur`,a.tabIndex=-1,a.slot="multipliers",a.classList.add("pill","multiplier"),t.appendChild(a)}if(!Number.isInteger(d)){const a=document.createElement("sup");a.textContent=`${d}x Mag`,a.tabIndex=-1,a.slot="multipliers",a.classList.add("pill","multiplier"),t.appendChild(a)}}return t.append(i),t}var m,v,ee,L,N,te,Ae,M,U,Ce,es,we,ts,he,dt,ue,ht,pe,ut;class Qt{constructor(e,t=new oe){p(this,te);p(this,M);p(this,Ce);p(this,we);p(this,he);p(this,ue);p(this,pe);p(this,m,void 0);p(this,v,void 0);p(this,ee,void 0);p(this,L,new Map);p(this,N,void 0);y(this,v,t),y(this,m,e),y(this,ee,new MutationObserver(i=>{for(const n of i)if(n.type==="childList"){const{addedNodes:r,removedNodes:o}=n;if(o.length>0)for(const d of o.values())l(this,L).delete(d.value);if(r.length>0)for(const d of r.values())l(this,L).set(d.value,d);console.dir(l(this,L))}})),l(this,ee).observe(l(this,m),{childList:!0}),l(this,m).addEventListener("click",this),l(this,m).addEventListener("keydown",this)}replaceWithNoResults(){const e=document.createDocumentFragment(),t=w("p",{content:"No results."});e.appendChild(t),l(this,m).replaceChildren(e)}select(e){let t=e;typeof e=="string"&&(t=l(this,L).get(e)),t.selected=!0,l(this,v).selectIngredient(t.value)}deselect(e){let t=e;typeof e=="string"&&(t=l(this,L).get(e)),l(this,v).unselectIngredient(t.value),t.selected=!1}addAll(e,t=null){const i=new DocumentFragment;for(let n of e){const r=qe(n,t);l(this,v).hasIngredient(n.name)&&this.select(r),i.appendChild(r)}l(this,m).appendChild(i)}replaceChildrenWith(e=[],t=null){const i=new DocumentFragment;for(let n of e){const r=qe(n,t);l(this,v).hasIngredient(n.name)&&this.select(r),i.appendChild(r)}l(this,m).replaceChildren(i)}reset(){l(this,v).clear()}handleEvent(e){switch(e.type){case"click":e.preventDefault();const i=e.target.closest("ingredient-list-item");_(this,M,U).call(this,i),_(this,te,Ae).call(this,i);break;case"keydown":_(this,pe,ut).call(this,e);break}}}m=new WeakMap,v=new WeakMap,ee=new WeakMap,L=new WeakMap,N=new WeakMap,te=new WeakSet,Ae=function(e){const{value:t}=e;!l(this,v).hasIngredient(t)&&l(this,v).canSelectMore()?(l(this,v).selectIngredient(t),Ct(e,t)):l(this,v).hasIngredient(t)?(l(this,v).unselectIngredient(t),nt(e,t)):(e.selected=!1,wt(e))},M=new WeakSet,U=function(e){y(this,N,e.id),l(this,m).setAttribute("aria-activedescendant",l(this,N)),e.focus()},Ce=new WeakSet,es=function(){y(this,N,null),l(this,m).setAttribute("aria-activedescendant",null)},we=new WeakSet,ts=function(){},he=new WeakSet,dt=function(e){let t=null;return _e(e.nextElementSibling)||(t=e.nextElementSibling),t},ue=new WeakSet,ht=function(e){let t=null;return _e(e.previousElementSibling)||(t=e.previousElementSibling),t},pe=new WeakSet,ut=function(e){const t=l(this,m).querySelectorAll("ingredient-list-item"),i=l(this,m).querySelector(`#${l(this,m).getAttribute("aria-activedescendant")}`);let n=i;if(!!i)switch(e.key){case"ArrowDown":if(!l(this,N)){_(this,M,U).call(this,t[0]);break}n=_(this,he,dt).call(this,i),n&&(_(this,M,U).call(this,n),e.preventDefault());break;case"ArrowUp":if(!l(this,N)){_(this,M,U).call(this,t[0]);break}n=_(this,ue,ht).call(this,i),n&&(_(this,M,U).call(this,n),e.preventDefault());break;case" ":const r=i;_(this,te,Ae).call(this,r),e.preventDefault();break}};const C=new Mt("scripts/infrastructure/worker/alchemy-worker-script.js"),P=new vt;C.onWorkerReady(us);C.onIngredientSearchResult(ls);C.onPopulateIngredientList(ds);C.onCalculateResult(os);C.onWorkerError(rs);window.addEventListener("beforeunload",s=>{console.info("Terminating Worker"),C.terminate()});const Y=P.id("brew-potion");Y.addEventListener("submit",ps);const Q=P.id("ingredient-filter");Q.addEventListener("submit",cs);const ss=P.id("query-interpretation"),V=P.id("ingredient-list"),pt=P.id("chosen-ingredients"),de=P.id("possible-potions"),is=P.id("hit-count"),Se=[],Re=new oe,k=new Qt(V,Re),xe=new Tt(pt),Xe=Y.elements[Y.elements.length-2],ns=3;Q.elements[ns].addEventListener("change",s=>{s.target.ariaChecked=s.target.checked});Q.addEventListener("reset",s=>{k.reset(),xe.clear(),Se.length=0,setTimeout(()=>Q.requestSubmit(),0)},{passive:!0});Y.addEventListener("reset",s=>{const e=w("li",{children:[w("p",{content:"Choose two to three ingredients."})]});de.replaceChildren(e)});V.addEventListener(st,s=>{const e=s.detail.ingredientName;let t=s.target;console.assert(t instanceof ce,"Exepected an input element."),Xe.validationMessage.length>0&&Xe.setCustomValidity(""),k.select(t),console.info(`${e} selected`),xe.addIngredient(e)});V.addEventListener(Ie,s=>{const e=s.detail.ingredientName;let t=s.target;k.deselect(t),console.info(`${e} deselected`),xe.removeIngredient(e)});pt.addEventListener(Ie,s=>{const e=s.detail.ingredientName;console.debug(`chosen ingredient deselected evt listener: Ingredient ${e} deselected.`),Re.unselectIngredient(e),k.deselect(e)});V.addEventListener(it,hs);function rs({detail:{payload:s}}){console.error(`Error: ${s}`)}function os({detail:{payload:s}}){console.info("Worker calculation results: ",s);let e=[];if(s.size>0)s.forEach((t,i)=>{let n=Je(t,i);e.push(n)});else{const t=Je({name:"Potion Failed",didSucceed:!1});e.push(t)}de.replaceChildren(...e)}function Je({name:s,didSucceed:e,effects:t,gold:i},n=""){const r=document.createDocumentFragment(),o=w("li"),d=w("h2",{content:s});if(o.appendChild(d),e){const a=w("p",{content:`Description: ${t}`});o.appendChild(a);const c=w("p",{content:`Gold: ${i}`});o.appendChild(c);const $=w("i",{content:`Recipe: ${n}`});o.appendChild($)}return r.appendChild(o),r}function ls({detail:{payload:s}}){console.debug("Search result incoming",s),Array.isArray(s.results)&&(s.results.length>0?(k.replaceChildrenWith(s.results,s.query),ft(s.results.length)):k.replaceWithNoResults())}function as(s,e,t){return`Showing ingredients sharing "${s}", sorted by ${e}, and part of ${Pt(t)}`}function cs(s){s.preventDefault(),console.assert(s.defaultPrevented),console.debug("Ingredient Search submitted.");const e=new FormData(Q);let t=["Vanilla"],i=e.get("by-effect"),n=e.get("effect-sort-order");t.push(...e.getAll("installed-dlc")),console.debug("Ingredient search form submitting ",Array.from(e.entries())),ss.textContent=as(i,n,t),V.ariaSort=n==="asc"?"ascending":"descending",C.sendSearchMessage(i,n,t)}function ds({detail:{payload:s}}){console.assert(Array.isArray(s),"Populate results payload was not an array"),k.replaceChildrenWith(s),ft(s.length)}function ft(s){is.textContent=`${s}`}function hs(s){const e=V;Se.push(e),e.ariaInvalid="true",setTimeout(()=>{let t=Se.pop();_e(t)||(t.ariaInvalid="false")},1e3)}function us(){C.sendPopulateMessage()}function ps(s){s.preventDefault();const e=s.submitter;if(Array.from(Re.selectedIngredients).length<Et){e.setCustomValidity("Expected 2 to 3 ingredients to be selected."),e.reportValidity();return}const i=new FormData(Y);e.setCustomValidity(""),fs(i),de.hasChildNodes()&&(console.debug("Attempting to remove default text"),de.replaceChildren())}function fs(s){let e=s.has("physician-perk"),t=s.has("benefactor-perk"),i=s.has("poisoner-perk"),n=s.getAll("selected-ingredients");console.assert(n.length>0,"Selected ingredients can't be empty.");let r=Number(s.get("alchemist-perk")),o=Number(s.get("skill-level")),d=Number(s.get("fortify-alchemy"));s.forEach(([a,c])=>console.debug(`Debugging Send Calculate Message: ${c}, ${a}`)),C.sendCalculateMessage(n,o,r,e,t,i,d)}
